<!doctype html>
<html >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>
	KNOCKOUT LESSON 4
  </title>
  <link rel="stylesheet" type="text/css" href="./main.css" />
  	<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<script type="application/javascript" src="../js/jquery-1.11.1.min.js"></script>
	    <script type="application/javascript" src="../js/bootstrap.min.js"></script>
  <style>
  table{border-collapse:collapse;border-spacing:0}
  table {
	font-family: verdana,arial,sans-serif;
	font-size:11px;
	color:#333333;
	border-width: 1px;
	border-color: #666666;
	border-collapse: collapse;
}
table th {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #dedede;
}
table td {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #ffffff;
}
  #content1{padding:16px;}
  </style>

  <script type="text/javascript" src="../js/knockout30.js"></script>
  </head>

  <body>
  	<nav class="navbar navbar-inverse navbar-default">
			<div class="navbar-header">
				<a href="#" class="navbar-brand">Roy</a>
			</div>
			<ul class="nav navbar-nav">
				<li><a href="../index.html">首页</a></li>
				<li ><a href="../bootstrap/index.html">bootstrap</a></li>
				<li ><a href="#">react</a></li>
				<li class="active"><a href="#">knockout</a></li>
		  </ul>
			
			<form class="navbar-form navbar-right" style="margin-right: 20px;">
				<div class="form-group">
					<input type="text"  class="form-control"/>
				</div>
				<button type="button" class="btn btn-danger">搜索</button>
			</form>
		</nav>
  
	<div id="content1">
		Year:<input data-bind="value:Year"><br/>
		Month:<input data-bind="value:Month"><br/>
		Day:<input data-bind="value:Day"><br/>
		Date:<span data-bind="html: Date " ></span><br/>
		<input data-bind="value:Date" />
	</div>

	
	<script type="text/javascript" src="../js/jQuery183.js"></script>
	<script>

	
		$(document).ready(function(){



			var  ViewModel = function(){
				var self = this;
				self.Year = ko.observable("");
				self.Month = ko.observable("");
				self.Day = ko.observable("");
				
				self.Date = ko.pureComputed({	
					write: function(value){
						var indexOfYear = value.indexOf('年');
						var indexOfMonth=value.indexOf('月');
						var indexOfDay=value.indexOf('日');
						self.Year(value.substring(0,indexOfYear));
						self.Month(value.substring(indexOfYear+1,indexOfMonth));
						self.Day(value.substring(indexOfMonth+1,indexOfDay));
					},
					read: function(){
						return self.Year()+'年'+self.Month()+'月'+self.Day()+'日';
					},
					owner:self
				});
			};
			var  currentViewModel = new ViewModel();
			ko.applyBindings(currentViewModel);


		});
	</script>
	
  </body>
</html>